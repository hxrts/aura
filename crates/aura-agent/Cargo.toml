# Aura Agent - Capability-driven identity and session management with clean architecture
[package]
name = "aura-agent"
version.workspace = true
edition.workspace = true
rust-version.workspace = true
authors.workspace = true
license.workspace = true
description = "Capability-based agents with clean service layer architecture for identity management"
keywords = ["identity", "capability", "agent", "threshold", "cryptography"]
categories = ["cryptography", "authentication"]
include = ["src/**", "Cargo.toml"]

[dependencies]
# Workspace crates
aura-core = { path = "../aura-core" }
aura-app = { path = "../aura-app", features = ["signals"] }  # RuntimeBridge trait definition + signals for forwarding
aura-effects = { path = "../aura-effects" }
aura-composition = { path = "../aura-composition" }
aura-protocol = { path = "../aura-protocol" }
aura-guards = { path = "../aura-guards" }
aura-consensus = { path = "../aura-consensus" }
aura-journal = { path = "../aura-journal" }
aura-relational = { path = "../aura-relational" }
aura-chat = { path = "../aura-chat" }
aura-authentication = { path = "../aura-authentication" }
aura-invitation = { path = "../aura-invitation" }
aura-rendezvous = { path = "../aura-rendezvous" }
aura-social = { path = "../aura-social" }
aura-sync = { path = "../aura-sync" }
aura-maintenance = { path = "../aura-maintenance" }
aura-transport = { path = "../aura-transport" }
aura-recovery = { path = "../aura-recovery" }
aura-authorization = { path = "../aura-authorization" }
aura-macros = { path = "../aura-macros" }
aura-mpst = { path = "../aura-mpst" }
aura-signature = { path = "../aura-signature" }
aura-store = { path = "../aura-store" }

# Cryptography dependencies
ed25519-dalek = { workspace = true }
frost-ed25519 = { workspace = true }
rand_core = { workspace = true }
rand = { workspace = true }
subtle = { workspace = true }
zeroize = { workspace = true }

# Choreography dependencies
rumpsteak-aura-choreography = { workspace = true }

# Serialization
serde = { workspace = true }
serde_json = { workspace = true }
biscuit-auth = { workspace = true }

# Async
tokio = { workspace = true }
async-trait = { workspace = true }
futures = { workspace = true }
futures-signals = { workspace = true }  # For SignalForwarder signal streaming

# Utilities
uuid = { workspace = true }
time = { workspace = true }
thiserror = { workspace = true }
tracing = { workspace = true }
once_cell = { workspace = true }
parking_lot = { workspace = true }
hex = { workspace = true }
base64 = { workspace = true }
cfg-if = "1"
dirs = { workspace = true }
get_if_addrs = "0.5"

# Optional dependencies for features
tokio-tungstenite = { workspace = true, optional = true }
# Note: axum, tower, tower-http, qrcode not in workspace - would need to be added if dev-console feature is needed

# Platform-specific secure storage
rumpsteak-aura = { workspace = true }
[target.'cfg(target_os = "macos")'.dependencies]
# security-framework = { workspace = true } # removed - unused
# core-foundation = { workspace = true } # removed - unused

[target.'cfg(target_os = "ios")'.dependencies]
# security-framework = { workspace = true } # removed - unused
# core-foundation = { workspace = true } # removed - unused

[target.'cfg(target_os = "windows")'.dependencies]
# windows = { workspace = true } # removed - unused

[target.'cfg(target_os = "linux")'.dependencies]
# keyutils = { workspace = true } # removed - unused

[target.'cfg(target_os = "android")'.dependencies]
# jni = { workspace = true } # removed - unused


[features]
default = []
# qrcode = ["dep:qrcode"]  # commented out - qrcode not in workspace
dev-console = [
    "dep:tokio-tungstenite",
    # "dep:axum",     # commented out - not in workspace
    # "dep:tower",    # commented out - not in workspace
    # "dep:tower-http", # commented out - not in workspace
]
real-android-keystore = []  # Enable real Android Keystore implementation

# Simulation feature: enables SimulationEnvironmentFactory and related abstractions
# for decoupling the simulator from agent internals
simulation = ["aura-core/simulation"]

# Experimental runtime modules (not enabled by default)
effect-container = []
context-propagation = []

# Platform-specific presets
# Enable to access the preset builders and AgentBuilder entrypoints.
ios = []      # iOS preset: Keychain crypto, app container storage
android = []  # Android preset: Keystore crypto, encrypted storage
web = []      # Web/WASM preset: Web Crypto API, IndexedDB storage

[dev-dependencies]
# tokio-test = { workspace = true } # removed - unused
aura-testkit = { path = "../aura-testkit" }
tracing-subscriber = { workspace = true }
futures = { workspace = true }
trybuild = { workspace = true }
proptest = { workspace = true }

[lints]
workspace = true
