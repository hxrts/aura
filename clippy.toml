# Clippy configuration for Aura - Enforces effects system usage
# See: https://doc.rust-lang.org/clippy/configuration.html

# Enforce effects system for deterministic testing
# Ban direct usage of time, randomness, and UUID generation

# Ban direct time access patterns
disallowed-methods = [
    # Time functions - must use effects.now()
    "std::time::SystemTime::now",
    "std::time::Instant::now", 
    "chrono::Utc::now",
    "chrono::Local::now",
    "chrono::offset::Utc::now",
    "chrono::offset::Local::now",
    
    # Random functions - must use effects.random_bytes() or effects.rng()
    "rand::random",
    "rand::thread_rng",
    "getrandom::getrandom",
    
    # UUID functions - must use effects.gen_uuid()
    "uuid::Uuid::new_v4",
    "uuid::Builder::from_random_bytes",
    
    # Other non-deterministic functions
    "std::process::id",
    "std::thread::current",
]

# Ban direct types that bypass effects
disallowed-types = [
    # These should be accessed through effects
    "rand::rngs::OsRng",
    "rand::rngs::ThreadRng",
    "getrandom::Error",
]

# Performance and correctness
too-many-arguments-threshold = 8
type-complexity-threshold = 250

# Security-focused lints
allow-unwrap-in-tests = true